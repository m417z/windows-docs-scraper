# WdfDeviceInitAssignSDDLString function

## Description

[Applies to KMDF only]

The **WdfDeviceInitAssignSDDLString** method assigns a security setting for a device.

## Parameters

### `DeviceInit` [in]

A pointer to a [WDFDEVICE_INIT](https://learn.microsoft.com/windows-hardware/drivers/wdf/wdfdevice_init) structure.

### `SDDLString` [in, optional]

A pointer to a [UNICODE_STRING](https://learn.microsoft.com/windows/win32/api/ntdef/ns-ntdef-_unicode_string) structure that describes a Unicode string. This string is an SDDL representation of a security descriptor.

## Return value

If the operation succeeds, **WdfDeviceInitAssignSDDLString** returns STATUS_SUCCESS. Additional return values include:

| Return code | Description |
| --- | --- |
| **STATUS_INSUFFICIENT_RESOURCES** | The system cannot allocate space to store the device name. |

## Remarks

Your driver can specify a security setting by using a subset of Security Descriptor Definition Language (SDDL). The *Wdmsec.h* file defines a set of SDDL_DEVOBJ_XXX-formatted constants that you can use. For more information about security descriptors and SDDL, see [Securing Device Objects](https://learn.microsoft.com/windows-hardware/drivers/kernel/securing-device-objects).

System administrators can override the specified security descriptor by adding a security descriptor to the registry. For more information, see [IoCreateDeviceSecure](https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure).

Before calling **WdfDeviceInitAssignSDDLString**, your driver must call [WdfDeviceInitAssignName](https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfdevice/nf-wdfdevice-wdfdeviceinitassignname), or it must call [WdfDeviceInitSetCharacteristics](https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfdevice/nf-wdfdevice-wdfdeviceinitsetcharacteristics) and specify FILE_AUTOGENERATED_DEVICE_NAME, because you cannot provide a security descriptor for an unnamed device object.

If the driver calls **WdfDeviceInitAssignSDDLString**, it must do so before it calls [WdfDeviceCreate](https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfdevice/nf-wdfdevice-wdfdevicecreate). For more information about calling **WdfDeviceCreate**, see [Creating a Framework Device Object](https://learn.microsoft.com/windows-hardware/drivers/wdf/creating-a-framework-device-object).

For more information about security issues, see [Security Issues for Framework-Based Drivers](https://learn.microsoft.com/windows-hardware/drivers/wdf/security-issues-for-kmdf-drivers).

If you are writing a UMDF driver, you must modify your driver's INF file to provide an appropriate security descriptor for the stack. For more information, see [Securing Device Objects](https://learn.microsoft.com/windows-hardware/drivers/kernel/securing-device-objects). For more information about using the registry, see [Setting Device Object Registry Properties During Installation](https://learn.microsoft.com/windows-hardware/drivers/kernel/setting-device-object-registry-properties-during-installation).

#### Examples

The following code example assigns a security setting for a device.

```cpp
NTSTATUS status;

status = WdfDeviceInitAssignSDDLString(
                                       pDeviceInit,
                                       &SDDL_DEVOBJ_SYS_ALL_ADM_ALL
                                       );
```