# DXGKDDI_INTERRUPT_ROUTINE callback function

## Description

The **DxgkDdiInterruptRoutine** function handles interrupts generated by a display adapter.

## Parameters

### `MiniportDeviceContext` [in]

A handle to a context block associated with a display adapter. The display miniport driver's [**DxgkDdiAddDevice**](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_add_device) function previously provided this handle to the DirectX graphics kernel subsystem.

### `MessageNumber` [in]

The zero-based index in the [message-signaled interrupt](https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-message-signaled-interrupts) (MSI) table if the interrupt is message-signaled. For line-based interrupts, this parameter is zero.

## Return value

If **DxgkDdiInterruptRoutine** determines that the adapter represented by **MiniportDeviceContext** did not generate the interrupt, it returns FALSE. Otherwise, it must dismiss the interrupt on the adapter before it returns TRUE.

## Remarks

If the interrupt is line-based (**MessageNumber** = 0), **DxgkDdiInterruptRoutine** must determine whether the adapter represented by **MiniportDeviceContext** generated the interrupt and, if not, return FALSE immediately.

If the adapter represented by **MiniportDeviceContext** did generate the interrupt, then **DxgkDdiInterruptRoutine** should perform the following steps:

* Dismiss the interrupt on the adapter.
* Complete the requested operation that caused the interrupt, or queue a DPC that will complete the operation later.
* Return TRUE as quickly as possible.

Any other display miniport driver function that shares memory (for example, some portion of the state represented by **MiniportDeviceContext**) with **DxgkDdiInterruptRoutine** must call [**DxgkCbSynchronizeExecution**](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkcb_synchronize_execution) to synchronize its access to the shared memory.

The **DxgkDdiInterruptRoutine** function can call [**DxgkCbQueueDpc**](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkcb_queue_dpc) and [**DxgkCbNotifyInterrupt**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_notify_interrupt) but must not call any other **DxgkCb*Xxx*** functions. For more information on the proper sequence of function calls, see [Submitting a Command Buffer](https://learn.microsoft.com/windows-hardware/drivers/display/submitting-a-command-buffer).

**DxgkDdiInterruptRoutine** runs at an elevated IRQL, so it (and all the functions it calls) must be non-pageable. Also, **DxgkDdiInterruptRoutine** (and all the functions it calls) must not attempt to access pageable memory.

## See also

[**DxgkCbNotifyInterrupt**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_notify_interrupt)

[**DxgkCbQueueDpc**](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkcb_queue_dpc)

[**DxgkCbSynchronizeExecution**](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkcb_synchronize_execution)