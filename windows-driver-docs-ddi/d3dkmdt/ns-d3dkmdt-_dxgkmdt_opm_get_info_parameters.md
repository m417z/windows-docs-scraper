# DXGKMDT_OPM_GET_INFO_PARAMETERS structure

## Description

The **DXGKMDT_OPM_GET_INFO_PARAMETERS** structure contains parameters that are used to retrieve information from a protected output object in a call to the [*DxgkDdiOPMGetInformation*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_get_information) function.

## Members

### `omac`

A [**DXGKMDT_OPM_OMAC**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmdt/ns-d3dkmdt-_dxgkmdt_opm_omac) structure that contains a One-key Cipher Block Chaining (CBC)-mode message authentication code (OMAC) for message authenticity. For more information about OMAC, see the [OMAC-1 algorithm](https://go.microsoft.com/fwlink/p/?linkid=70417). The OMAC-1 parameters that OPM and COPP use are:

*E* = AES (Advanced Encryption Standard)

*t* = 128 bits

*K* = The 128-bit key that the display miniport driver receives when [*DxgkDdiOPMSetSigningKeyAndSequenceNumbers*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_set_signing_key_and_sequence_numbers) is called.

*n* = 128 bits

For information about AES, see the [RSA Laboratories](https://www.rsa.com) website.

### `rnRandomNumber`

A [**DXGKMDT_OPM_RANDOM_NUMBER**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmdt/ns-d3dkmdt-_dxgkmdt_opm_random_number) structure that contains a protected output object's 128-bit cryptographically secure random number. This random number is generated by an application and supplied to the display miniport driver in **rnRandomNumber** in a call to the driver's [*DxgkDdiOPMGetInformation*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_get_information) function.

### `guidInformation`

The GUID that is used to retrieve the information. **guidInformation** can be set to one of the following GUIDs:

* DXGKMDT_OPM_GET_CURRENT_HDCP_SRM_VERSION
* DXGKMDT_OPM_GET_CONNECTOR_TYPE
* DXGKMDT_OPM_GET_SUPPORTED_PROTECTION_TYPES
* DXGKMDT_OPM_GET_VIRTUAL_PROTECTION_LEVEL
* DXGKMDT_OPM_GET_ACTUAL_PROTECTION_LEVEL
* DXGKMDT_OPM_GET_ACTUAL_OUTPUT_FORMAT
* DXGKMDT_OPM_GET_ADAPTER_BUS_TYPE
* DXGKMDT_OPM_GET_DVI_CHARACTERISTICS. Supported in Windows 7 and later versions.
* DXGKMDT_OPM_GET_OUTPUT_ID. Supported in Windows 7 and later versions.

### `ulSequenceNumber`

A sequence number. For the [*DxgkDdiOPMGetInformation*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_get_information) function to process an information request, the value in **ulSequenceNumber** must match the current 4-byte sequence number that the display miniport driver stores. If a match is not detected, *DxgkDdiOPMGetInformation* returns an error code. If a match is detected, *DxgkDdiOPMGetInformation* increments the stored sequence number before returning. The initial 4-byte sequence number was part of the 256-byte array that the *EncryptedParameters* parameter of the [*DxgkDdiOPMSetSigningKeyAndSequenceNumbers*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_set_signing_key_and_sequence_numbers) function pointed to.

### `cbParametersSize`

The size, in bytes, of the valid data that the **abParameters** member points to.

### `abParameters`

A 4056-byte array that contains the data that accompanies the information request that is identified by the **guidInformation** member.

No data is required for the DXGKMDT_OPM_GET_CONNECTOR_TYPE, DXGKMDT_OPM_GET_SUPPORTED_PROTECTION_TYPES, DXGKMDT_OPM_GET_ACTUAL_OUTPUT_FORMAT, DXGKMDT_OPM_GET_ADAPTER_BUS_TYPE, DXGKMDT_OPM_GET_DVI_CHARACTERISTICS, DXGKMDT_OPM_GET_OUTPUT_ID, and DXGKMDT_OPM_GET_CURRENT_HDCP_SRM_VERSION requests.

The DXGKMDT_OPM_GET_ACTUAL_PROTECTION_LEVEL and DXGKMDT_OPM_GET_VIRTUAL_PROTECTION_LEVEL requests require data that identifies the protection type that the protection level is requested for. Therefore, these requests require that the first 4 bytes in the **abParameters** array contain the protection type.

## Remarks

All of the data after the **omac** member in DXGKMDT_OPM_GET_INFO_PARAMETERS is signed; the signature is the OMAC and is stored in the **omac** member. The data is signed by using the [OMAC-1 algorithm](https://go.microsoft.com/fwlink/p/?linkid=70417).

DXGKMDT_OPM_GET_INFO_PARAMETERS is not used for COPP emulation; instead, the [**DXGKMDT_OPM_COPP_COMPATIBLE_GET_INFO_PARAMETERS**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmdt/ns-d3dkmdt-_dxgkmdt_opm_copp_compatible_get_info_parameters) structure is used for COPP.

## See also

[**DXGKMDT_OPM_OMAC**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmdt/ns-d3dkmdt-_dxgkmdt_opm_omac)

[**DXGKMDT_OPM_RANDOM_NUMBER**](https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmdt/ns-d3dkmdt-_dxgkmdt_opm_random_number)

[*DxgkDdiOPMGetInformation*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_get_information)

[*DxgkDdiOPMSetSigningKeyAndSequenceNumbers*](https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_opm_set_signing_key_and_sequence_numbers)