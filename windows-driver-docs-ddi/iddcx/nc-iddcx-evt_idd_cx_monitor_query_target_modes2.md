## Description

The OS calls **EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES2** to get a list of target modes supported by the driver for a monitor connected to the endpoint. This callback is similar to [**EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nc-iddcx-evt_idd_cx_monitor_query_target_modes), but allows the driver to report additional information for HDR10 and WCG target modes.

## Parameters

### `MonitorObject`

[in] The OS-generated context handle that identifies the monitor to generate a list of target modes for. This [IDDCX_MONITOR](https://learn.microsoft.com/windows-hardware/drivers/display/iddcx-objects#iddcx_monitor) object was returned in a prior call to [**IddCxMonitorCreate**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nf-iddcx-iddcxmonitorcreate).

### `pInArgs`

[in] Pointer to a [**IDARG_IN_QUERYTARGETMODES2**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-idarg_in_querytargetmodes2) structure that contains input arguments used by **EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES2**.

### `pOutArgs`

[out] Pointer to a [**IDARG_OUT_QUERYTARGETMODES**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-idarg_out_querytargetmodes) structure that contains output arguments generated by **EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES2**.

## Return value

**EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES2** returns an [NTSTATUS](https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values) value. If the operation is successful, it returns STATUS_SUCCESS or another status value for which NT_SUCCESS(status) equals TRUE. Otherwise, it returns an appropriate NTSTATUS error code.

## Remarks

This function is similar to [**EVT_IDD_CX_PARSE_MONITOR_DESCRIPTION2**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nc-iddcx-evt_idd_cx_parse_monitor_description2) in that it allows drivers to report the same extra mode information. A driver that supports HDR must implement this function; drivers that don't support HDR can expose only the existing [**EVT_IDD_CX_MONITOR_QUERY_TARGET_MODES**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nc-iddcx-evt_idd_cx_monitor_query_target_modes) function.

The [**IDDCX_TARGET_MODE2::BitsPerComponent**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-iddcx_target_mode2) field allows multiple formats and bit depths to be reported in a single mode. For example, a driver can report 8 and 10 bits per component in RGB by setting both **IDDCX_BITS_PER_COMPONENT_8** and **IDDCX_BITS_PER_COMPONENT_10** in **IDDCX_TARGET_MODE2::BitsPerComponent::Rgb**. A driver should only report different bits per component as unique modes if other mode details also differ.

Drivers returning modes with SDR WCG or HDR parameters will fail if they have not also reported [**IDDCX_ADAPTER_FLAGS_CAN_PROCESS_FP16**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ne-iddcx-iddcx_adapter_flags) in the [**IddCxAdapterInitAsync**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nf-iddcx-iddcxadapterinitasync) call. SDR WCG and HDR [**IDDCX_WIRE_BITS_PER_COMPONENT.BitsPerComponent**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-iddcx_wire_bits_per_component) parameters are:

* Any value for **Rgb** other than **IDDCX_BITS_PER_COMPONENT_8**, or
* Any value for **YCbCr444**, **YCbCr422**, or **YCbCr420** other than **IDDCX_BITS_PER_COMPONENT_NONE**.

For more information about HDR support, see [IddCx version 1.10 updates](https://learn.microsoft.com/windows-hardware/drivers/display/iddcx1.10-updates).

## See also

[**IDARG_IN_QUERYTARGETMODES2**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-idarg_in_querytargetmodes2)

[**IDARG_OUT_QUERYTARGETMODES**](https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-idarg_out_querytargetmodes)