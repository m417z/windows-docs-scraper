# ITransferAdviseSink::FileFailure

## Description

Called when there is a failure and user interaction is needed.

## Parameters

### `psi` [in]

Type: **[IShellItem](https://learn.microsoft.com/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem)***

The [IShellItem](https://learn.microsoft.com/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) on which the operation failed.

### `pszItem` [in]

Type: **LPCWSTR**

Optional. A pointer to a null-terminated buffer that contains the name of the file. If this value is **NULL**, the name given by the *psi* parameter is used.

### `hrError` [in]

Type: **HRESULT**

The error code generated by the failure. This error must be handled by the copy engine.

### `pszRename` [in, out]

Type: **LPWSTR**

Optional. When this method returns, contains a pointer to a null-terminated buffer that contains a new name for the file. The name cannot exceed length *cchRename*. If this parameter is **NULL**, no option to rename will be available.

### `cchRename` [in]

Type: **ULONG**

The size of the *pszRename* buffer, in characters.

## Return value

Type: **HRESULT**

Any other **HRESULT** should be returned to the calling process. If the failure is not handled, the return value should be *hrError*.

| Return code | Description |
| --- | --- |
| **COPYENGINE_S_USER_RETRY** | The user clicked **Retry**. The handler should retry the file operation. |
| **COPYENGINE_E_USERCANCELLED** | The user clicked **Cancel**. The entire copy job is being terminated. The handler should return this code back to the copy engine. |
| **COPYENGINE_S_USER_IGNORED** | The user clicked **Ignore**. The handler should skip creating the item and return this code back to the copy engine. |